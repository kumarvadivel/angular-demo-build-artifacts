(self.webpackChunkintegreat=self.webpackChunkintegreat||[]).push([["projects_dlp-personal-loan_src_app_components_sanction-details_sanction-details_module_ts"],{298:(O,_,c)=>{c.r(_),c.d(_,{SanctionDetailsModule:()=>Y});var n=c(820),v=c(416),b=c(676),t=c(5742),D=c(1095),S=c(8922),y=c(9767),E=c(9615);function f(o,u){1&o&&t.\u0275\u0275element(0,"img",13),2&o&&t.\u0275\u0275property("src","../../../assets/icons/close.png",t.\u0275\u0275sanitizeUrl)}function w(o,u){1&o&&t.\u0275\u0275element(0,"spinner")}let P=(()=>{class o{constructor(e,a,i,p){this.dialogRef=e,this.commonService=a,this.theme1ApiService=i,this.data=p,this.showloader=!1}actionClick(e){this.dialogRef.close(e)}addRecord(){if(this.commonService.SectionValidationSystem(this.data.popupContent))switch(this.data.pageCode){case"KCC_LAND":this.data.popupContent[1].sectionContent?.formValueEmitter&&this.data.popupContent[1].sectionContent.formValueEmitter.next(),this.createOrupdateLand(this.data.popupContent[1].sectionContent);break;case"KCC_CROP":this.data.popupContent[1].sectionContent?.formValueEmitter&&this.data.popupContent[1].sectionContent.formValueEmitter.next(),this.createOrupdatecrop(this.data.popupContent[1].sectionContent);break;case"BRANCH_UPDATE":this.branchUpdate()}}branchUpdate(){if(this.commonService.SectionValidationSystem(this.data.popupContent)){this.data.popupContent[2].sectionContent.formValueEmitter.next();let e={access_token:this.data.journey.product.access_token,loanUuid:this.data.journey.product.loanUuid,userHierarchyUnitCode:this.data.popupContent[2].sectionContent.formValue.branchCode,microservicetoken:this.data.journey.product.oauthAccessToken};this.theme1ApiService.assignUserHierarchy(e).then(a=>{this.theme1ApiService.assignParkingBranch(e).then(i=>{this.dialogRef.close("DONE")})})}}createOrupdateLand(e){this.showloader=!0;let a={...e.formValue,access_token:this.data.journey.product.access_token,loanUuid:this.data.journey.product.loanUuid,applicationSource:"WEB_JOURNEY"};a=this.mapUUid(a,e),this.theme1ApiService.createLandDetails(a).then(i=>{this.closePopup(i)})}mapUUid(e,a){return a?.options?.mappingFields?.uuid&&(e.uuid=a.options.mappingFields.uuid),e}createOrupdatecrop(e){this.showloader=!0;let a={...e.formValue,access_token:this.data.journey.product.access_token,loanUuid:this.data.journey.product.loanUuid,applicationSource:"WEB_JOURNEY",category:"crop"};a=this.mapUUid(a,e),this.theme1ApiService.createCropDetails(a).then(i=>{this.closePopup(i)})}closePopup(e){"200"==e.code&&this.dialogRef.close(this.data.popupContent[1].sectionContent.formValue)}cancelRecord(){this.dialogRef.close()}static#t=this.\u0275fac=function(a){return new(a||o)(t.\u0275\u0275directiveInject(b.MatDialogRef),t.\u0275\u0275directiveInject(D.I),t.\u0275\u0275directiveInject(S.G),t.\u0275\u0275directiveInject(b.MAT_DIALOG_DATA))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-add-new-item-popup"]],decls:16,vars:4,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"popup-page"],[1,"header-wrapper"],[1,"form-label","form-label-lg","mb-0"],["alt","img","class","ml-97","mat-dialog-close","",3,"src",4,"ngIf"],[1,"content-area"],[3,"config"],[1,"w-100","float-left","popup-btn-panel"],[1,"btn-panel"],[1,"btn-orange","mr-15","mob-w-100","mb-20",3,"click"],[1,"btn-light","mob-w-100","mr-15",3,"click"],[4,"ngIf"],["alt","img","mat-dialog-close","",1,"ml-97",3,"src"]],template:function(a,i){1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,f,1,1,"img",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275element(8,"app-section-builder",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",8)(10,"div",9)(11,"button",10),t.\u0275\u0275listener("click",function(){return i.addRecord()}),t.\u0275\u0275text(12,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"button",11),t.\u0275\u0275listener("click",function(){return i.cancelRecord()}),t.\u0275\u0275text(14,"Cancel"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275template(15,w,1,0,"spinner",12)),2&a&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(i.data.title),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!i.data.actionItems),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",i.data.popupContent),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",i.showloader))},dependencies:[n.NgIf,b.MatDialogClose,y.K,E.t],styles:[".popup-page[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f9fc;padding:12px 30px;position:sticky;top:0;z-index:9999}.popup-page[_ngcontent-%COMP%]   .text-info-content[_ngcontent-%COMP%]{font-size:14px!important}.content-area[_ngcontent-%COMP%]{width:100%;overflow:hidden;padding:25px 30px;max-height:100%;overflow-x:hidden;overflow-y:auto;font-family:var(--font-family)!important}.button-section[_ngcontent-%COMP%]{flex-direction:row-reverse}.ml-70[_ngcontent-%COMP%]{margin-left:70%!important}"]})}return o})();var A=c(443),T=c(8244),I=c(6323),C=c(7550),M=c(2324),m=c(327),x=c(9175),l=c(8727),r=c(1977);const s=o=>({"mb-30":o}),d=o=>({"mb-15":o});function g(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"stepper",9),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,s,e.metaConfig.showStepper)),t.\u0275\u0275advance(),t.\u0275\u0275property("stepperData",e.journey.metaData.stepperData)}}function h(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275element(1,"app-substepper",9),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,d,e.metaConfig.showSubStepper)),t.\u0275\u0275advance(),t.\u0275\u0275property("stepperData",e.journey.metaData.substepperData)}}function j(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",32)(1,"label",33),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",34)(4,"strong"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()()),2&o){const e=u.$implicit,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.title),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.formatAmount(e.amount))}}function V(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",30),t.\u0275\u0275template(1,j,6,2,"div",31),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",e.metaConfig.showSanctionInformation.content)}}function k(o,u){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",37),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(i.enhanceSanction())}),t.\u0275\u0275elementStart(1,"button",38),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.metaConfig.customData.EnhanceSanctionButtonlabel)}}function B(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",35)(1,"div")(2,"label",33),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",34)(5,"strong"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(7,k,3,1,"div",36),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.metaConfig.customData.sanctionTitle),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.formatAmount(e.metaConfig.customData.sanctionedAmount)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf","STP"==(null==e.$scope.fetchEligibilityData.output||null==e.$scope.fetchEligibilityData.output.plEligOutput?null:e.$scope.fetchEligibilityData.output.plEligOutput.stpFlag))}}function N(o,u){if(1&o&&t.\u0275\u0275element(0,"app-section-builder",5),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.metaConfig.slideContent)}}function L(o,u){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",39)(1,"app-emi-calculator",40),t.\u0275\u0275listener("valueEmit",function(i){t.\u0275\u0275restoreView(e);const p=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(p.valueBind(i))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",41)(3,"button",42),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.fetchRepaymentSchedule())}),t.\u0275\u0275text(4,"Calculate "),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("emiCalcData",e.metaConfig.customData)}}function F(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div",43)(1,"p",44),t.\u0275\u0275text(2,"Note: You are eligible upto maximum EMI amount of "),t.\u0275\u0275elementStart(3,"span",45),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(5," to avail this loan."),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.formatAmount(e.metaConfig.customData.maxEmi))}}function R(o,u){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",46)(1,"button",47),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.continue())}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("disabled",0==e.metaConfig.customData.sanctionProceedBtnEnable),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(e.metaConfig.fieldLabel)}}function U(o,u){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",11),t.\u0275\u0275template(2,V,2,1,"div",12)(3,B,8,3,"div",13)(4,N,1,1,"app-section-builder",14),t.\u0275\u0275elementStart(5,"div",15)(6,"div",16)(7,"div",17)(8,"div",18)(9,"label"),t.\u0275\u0275text(10,"Edit Loan Amount"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(11,L,5,1,"div",19),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",16)(13,"div",20)(14,"div",17)(15,"div",18)(16,"label"),t.\u0275\u0275text(17,"Review Loan Details"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",21)(19,"div",22)(20,"div",23),t.\u0275\u0275element(21,"app-chart",24),t.\u0275\u0275elementStart(22,"div",25)(23,"div")(24,"p",26),t.\u0275\u0275text(25,"Total Interest Payable:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"p",27)(27,"strong"),t.\u0275\u0275text(28),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(29,"div")(30,"p",26),t.\u0275\u0275text(31,"Total Payable:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"p",27)(33,"strong"),t.\u0275\u0275text(34),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(35,F,6,1,"div",28),t.\u0275\u0275elementEnd()()()()()()()(),t.\u0275\u0275template(36,R,3,2,"div",29),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",1==e.showSanctionInformation),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",1==e.showEnhanceSanction),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",1==e.slideContent),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",e.metaConfig.showEmical),t.\u0275\u0275advance(10),t.\u0275\u0275property("config",e.chartConfig)("updateChart",e.chartConfig.updateChart.asObservable()),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",e.formatAmount(e.metaConfig.customData.totalInterestPaid),""),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",e.formatAmount(e.metaConfig.customData.totalPayable),""),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf","PTLEX"==e.journey.product.productCode),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",e.showSubmit)}}function W(o,u){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",75),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.returntoSanctionPage())}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate2("",e.metaConfig.customData.continueCurrentSanction,"",e.formatAmount(e.metaConfig.customData.loanAmount),"")}}function $(o,u){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",48)(1,"div",49)(2,"div",50)(3,"div",51)(4,"div",1)(5,"label",52),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",34)(8,"strong"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(10,"div",48)(11,"div",48)(12,"div",53)(13,"div",54)(14,"label",55),t.\u0275\u0275text(15,"Requested Loan Amount(\u20b9)"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",56)(17,"input",57),t.\u0275\u0275twoWayListener("ngModelChange",function(i){t.\u0275\u0275restoreView(e);const p=t.\u0275\u0275nextContext();return t.\u0275\u0275twoWayBindingSet(p.metaConfig.customData.enhancedsanctionedAmount,i)||(p.metaConfig.customData.enhancedsanctionedAmount=i),t.\u0275\u0275resetView(i)}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(18,"div",54)(19,"label",58),t.\u0275\u0275text(20,"Requested tenure"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",59)(22,"div",56)(23,"input",60),t.\u0275\u0275twoWayListener("ngModelChange",function(i){t.\u0275\u0275restoreView(e);const p=t.\u0275\u0275nextContext();return t.\u0275\u0275twoWayBindingSet(p.metaConfig.customData.enhancedtenure,i)||(p.metaConfig.customData.enhancedtenure=i),t.\u0275\u0275resetView(i)}),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(24,"div",48)(25,"div",61)(26,"div",62)(27,"div",63),t.\u0275\u0275text(28),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"div",64),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.Editbranch())}),t.\u0275\u0275elementStart(30,"span",65),t.\u0275\u0275text(31," edit "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(32,"div",66)(33,"div",67),t.\u0275\u0275element(34,"img",68),t.\u0275\u0275elementStart(35,"div",69),t.\u0275\u0275text(36),t.\u0275\u0275elementStart(37,"div",70)(38,"span",71),t.\u0275\u0275text(39),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(40,"div",48)(41,"div",72)(42,"button",73),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.enhanceSanctionSubmit())}),t.\u0275\u0275text(43),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(44,W,2,2,"button",74),t.\u0275\u0275elementEnd()()()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(e.metaConfig.customData.sanctionTitle),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.formatAmount(e.metaConfig.customData.sanctionedAmount)),t.\u0275\u0275advance(8),t.\u0275\u0275twoWayProperty("ngModel",e.metaConfig.customData.enhancedsanctionedAmount),t.\u0275\u0275advance(6),t.\u0275\u0275twoWayProperty("ngModel",e.metaConfig.customData.enhancedtenure),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",e.metaConfig.customData.BranchDetails.title,""),t.\u0275\u0275advance(6),t.\u0275\u0275property("src","../../../assets/icons/building.png",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",e.metaConfig.customData.BranchDetails.name," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.metaConfig.customData.BranchDetails.address),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.metaConfig.customData.visitBank),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf","STP"==(null==e.$scope.fetchEligibilityData.output||null==e.$scope.fetchEligibilityData.output.plEligOutput?null:e.$scope.fetchEligibilityData.output.plEligOutput.stpFlag))}}function z(o,u){1&o&&t.\u0275\u0275element(0,"spinner")}const H=[{path:"sanction",component:(()=>{class o{constructor(e,a,i,p,G,K,Q){this.commonService=e,this.commonVariableService=a,this.dialog=i,this.theme1ApiService=p,this.localStorage=G,this.route=K,this.sharedService=Q,this.showSubmit=!0,this.showloader=!1,this.loanAmount=1e3,this.tenure=1,this.interest=7.35,this.isChecked=!1,this.isshowEnhancedDetails=!1,this.showEnhanceSanction=!1,this.customData={},this.loanAmtDisp={dispName:"Loan Amount",min:null,max:null,steps:1e3,binder:null,footerStartVal:null,footerEndVal:null,func:this.formatAmount},this.tenureDisp={dispName:"Tenure",min:null,max:null,steps:1,binder:null,footerStartVal:null,footerEndVal:null,func:this.formatTenure},this.LoanData={},this.pageCode="SANCTION_DETAILS",this.slideContent=!1,this.showSanctionInformation=!1,this.journey=this.commonService.getJourney(),this.commonService.bindHeaderFooterTypes(this.pageCode),this.config=this.commonService.fetchProductPageConfig(this.journey,this.pageCode),this.metaConfig=this.commonService.fetchProductMetaConfig(this.journey,this.pageCode),this.chartConfig=this.metaConfig.chartConfig,this.chartFooter=this.metaConfig.chartFooter,this.branchConfig=this.metaConfig.customData.BranchDetails,this.temp=this.metaConfig.temp}ngOnInit(){this.dataScopeFetchFlow()}ngOnDestroy(){this.scopeSubscriber.unsubscribe()}dataScopeFetchFlow(){this.metaConfig.dataScopeFetchFlow?.length?(this.showloader=!0,this.commonService.fetchDataScopeData(this.metaConfig.dataScopeFetchFlow[0],this.metaConfig.dataScopeFetchFlow.length,0,{},this.metaConfig.dataScopeFetchFlow,this.config,this.pageCode)):this.triggerAfterScopeEffect(),this.scopeSubscriber=this.commonVariableService.scopeSubject$.subscribe(e=>{this.$scope=e,this.triggerAfterScopeEffect()})}triggerAfterScopeEffect(){this.showloader=!1,this.customInitializerWithRespectToProduct()}customInitializerWithRespectToProduct(){"PTLEX"==this.journey.product.productCode&&(this.formdataPrepopulationWithRespectToProduct(),this.contentModeratorWithRespectToProduct())}formdataPrepopulationWithRespectToProduct(){"PTLEX"==this.journey.product.productCode&&(this.config=this.commonService.formDataEditDataPopulator(this.config,{...this.$scope,...this.journey},this.metaConfig))}contentModeratorWithRespectToProduct(){"PTLEX"==this.journey.product.productCode&&(this.showEnhanceSanction=!0,this.config=this.commonService.pageSectionContentModeration(this.config,{$scope:{...this.$scope},journey:{...this.journey},metaConfig:{...this.metaConfig}}),this.metaConfig.customData.showEsignButton="STP"==this.$scope.fetchEligibilityData.output?.plEligOutput.stpFlag,this.metaConfig.customData.showEnhanceButton="STP"==this.$scope.fetchEligibilityData.output?.plEligOutput.stpFlag,this.metaConfig.customData.maxLoanAmount=this.$scope.fetchEligibilityData.output?.plEligOutput.sanctionedFinalAmount,this.metaConfig.customData.enhancedsanctionedAmount=this.$scope.fetchEligibilityData.output?.plEligOutput.sanctionedFinalAmount,this.metaConfig.customData.minLoanAmount=this.$scope.fetchEligibilityData.output?.plEligOutput.productMinLoanAmount,this.metaConfig.customData.minTenure=this.$scope.fetchEligibilityData.output?.plEligOutput.productMinTenure,this.metaConfig.customData.maxTenure=this.$scope.fetchEligibilityData.output?.plEligOutput.tenure,this.metaConfig.customData.loanAmount=this.$scope.fetchEligibilityData.output?.plEligOutput.sanctionedFinalAmount,this.metaConfig.customData.sanctionedAmount=this.$scope.fetchEligibilityData.output?.plEligOutput.sanctionedFinalAmount,this.metaConfig.customData.tenure=this.$scope.fetchEligibilityData.output?.plEligOutput.tenure,this.metaConfig.customData.maxEmi=this.$scope.fetchEligibilityData.output?.plEligOutput.maxEmi,this.metaConfig.customData.enhancedtenure=this.$scope.fetchEligibilityData.output?.plEligOutput.tenure,this.metaConfig.customData.interest=this.$scope.fetchEligibilityData.output?.plEligOutput.roi,this.metaConfig.showEmical=!0,this.metaConfig.customData.sanctionProceedBtnEnable=!1,this.commonVariableService.globalLoaderState=!1,this.metaConfig.customData.emiToBePaid=this.$scope.fetchRepaymentSchedule.object.emiToBePaid,this.metaConfig.chartConfig.centerData.value=this.$scope.fetchRepaymentSchedule.object.emiToBePaid,this.metaConfig.chartConfig.data[0].value=this.metaConfig.customData.loanAmount,this.metaConfig.chartConfig.data[1].value=this.metaConfig.customData.emiToBePaid*this.metaConfig.customData.tenure-this.metaConfig.customData.loanAmount,this.metaConfig.customData.totalPayable=this.$scope.fetchRepaymentSchedule.object.totalPayable,this.metaConfig.customData.totalInterestPaid=this.$scope.fetchRepaymentSchedule.object.payableInterest,this.metaConfig.customData.sanctionProceedBtnEnable=!0,this.chartConfig.updateChart.next(),this.showloader=!1,this.metaConfig.customData.BranchDetails.name=`Bank Of India ${this.$scope.loanDetails.userHierarchyUnit.userHierarchyUnitName} Branch`,this.metaConfig.customData.BranchDetails.address=`${this.$scope.loanDetails.userHierarchyUnit.addressAssigned.line1Value} ${this.$scope.loanDetails.userHierarchyUnit.addressAssigned.cityValue},${this.$scope.loanDetails.userHierarchyUnit.addressAssigned.stateValue},${this.$scope.loanDetails.userHierarchyUnit.addressAssigned.zipCodeValue}`)}continue(){this.submitValidationForProduct()}ContinueButtonStatus(){return"PTLEX"==this.journey.product.productCode&&this.commonService.SectionMandatoryValidationSystem(this.config)}submitValidationForProduct(){"PTLEX"==this.journey.product.productCode&&(this.journey=this.commonService.getJourney(),this.commonService.SectionValidationSystem(this.config)&&(this.metaConfig.customData.isSanctionEnhanced=!1,this.journey.metaData.capturedData.SANCTION_DETAILS=this.metaConfig.customData,this.commonService.setJourney(this.journey),this.formSubmitFlow()))}formSubmitFlow(){this.journey=this.commonService.getJourney(),this.metaConfig.formSubmitFlow?(this.commonVariableService.globalLoaderState=!0,this.commonService.setJourney(this.journey),this.metaConfig.formSubmitFlow.length?this.commonService.apiCall({submitflow:this.metaConfig.formSubmitFlow[0],currentIndex:0,totalLength:this.metaConfig.formSubmitFlow.length,pageCode:this.pageCode,configList:this.metaConfig,pageconfig:this.config,extraCloudParams:this.$scope}):(this.commonVariableService.globalLoaderState=!0,this.commonService.proceedJourney(this.pageCode,void 0,this.config))):(this.commonVariableService.globalLoaderState=!0,this.commonService.proceedJourney(this.pageCode,void 0,this.config))}formatAmount(e){return"\u20b9 "+new Intl.NumberFormat("en-IN").format(e)}formatTenure(e){return e+" months"}valueBind(e){this.metaConfig.customData.sanctionProceedBtnEnable=!1,this.metaConfig.customData=e}enhanceSanction(){this.metaConfig.customData.isshowEnhancedDetails=!0,this.config[0].sectionContent.titleData="Sanction Details",this.config[1].sectionContent.paragraphData="Please Customise Your Loan Details To Best Suit Your Needs"}enhanceSanctionAmount(e){this.commonService.SectionValidationSystem(this.config)&&(this.commonService.saveSectionFormDataToJourney(this.config,"SANCTION_DETAILS"),this.journey=this.commonService.getJourney(),this.journey.metaData.capturedData.SANCTION_DETAILS={},this.journey.metaData.capturedData.SANCTION_DETAILS.acceptStatus=e,this.localStorage.SessionSetItem("SANCTION_DETAILS",this.journey),this.formSubmitFlow())}fetchRepaymentSchedule(){this.metaConfig.customData.tenure<this.metaConfig.customData.minTenure&&this.sharedService.openSnackBar("Please enter valid tenure"),this.metaConfig.customData.loanAmount<this.metaConfig.customData.minLoanAmount?this.sharedService.openSnackBar("Please enter valid loan amount"):this.theme1ApiService.fetchRepaymentSchedule({access_token:this.journey.product.access_token,microservicetoken:this.journey.product.oauthAccessToken,interestRate:this.metaConfig.customData.interest,loanTenure:this.metaConfig.customData.tenure,loanAmount:this.metaConfig.customData.loanAmount}).then(a=>{"200"==a.code?(this.commonVariableService.globalLoaderState=!1,this.metaConfig.customData.emiToBePaid=a.object.emiToBePaid,this.metaConfig.chartConfig.centerData.value=a.object.emiToBePaid,this.metaConfig.chartConfig.data[0].value=this.metaConfig.customData.loanAmount,this.metaConfig.chartConfig.data[1].value=this.metaConfig.customData.emiToBePaid*this.metaConfig.customData.tenure-this.metaConfig.customData.loanAmount,this.metaConfig.customData.totalPayable=a.object.totalPayable,this.metaConfig.customData.totalInterestPaid=a.object.payableInterest,this.metaConfig.customData.firstEmiDate=a.object.firstEmiDate,this.metaConfig.customData.principal=a.object.principal,this.metaConfig.customData.sanctionProceedBtnEnable=!0,this.chartConfig.updateChart.next(),this.showloader=!1):(this.commonVariableService.globalLoaderState=!1,this.showloader=!1,this.sharedService.openSnackBar(a?.message,"success"))}).catch(this.commonService.catchErrors)}fetchEmiData(){this.theme1ApiService.fetchPrincipalApprovedDetails({access_token:this.journey.product.access_token,loanUuid:this.journey.product.loanUuid,microservicetoken:this.journey.product.oauthAccessToken}).then(a=>{this.metaConfig.customData.emiToBePaid=a.object.emiToBePaid,this.metaConfig.chartConfig.centerData.value=a.object.emiToBePaid,this.metaConfig.chartConfig.data[0].value=this.metaConfig.customData.loanAmount,this.metaConfig.chartConfig.data[1].value=this.metaConfig.customData.emiToBePaid*this.metaConfig.customData.tenure-this.metaConfig.customData.loanAmount,this.metaConfig.customData.totalPayable=this.metaConfig.customData.emiToBePaid*this.metaConfig.customData.tenure,this.metaConfig.customData.totalInterestPaid=this.metaConfig.customData.emiToBePaid*this.metaConfig.customData.tenure-this.metaConfig.customData.loanAmount,this.metaConfig.customData.sanctionProceedBtnEnable=!0,this.chartConfig.updateChart.next()}).catch(this.commonService.catchErrors)}Editbranch(){let e;e=cloneDeep(this.metaConfig.addConfig),this.dialog.open(P,{panelClass:["w-70","mob-w-100"],height:"70%",disableClose:!0,data:{title:"",popupContent:e,action:"EDIT",journey:this.journey,pageCode:"BRANCH_UPDATE"}}).afterClosed().subscribe(i=>{i&&"DONE"==i&&this.fetchLoanDetails()})}returntoSanctionPage(){this.metaConfig.customData.sanctionProceedBtnEnable=!0,this.metaConfig.customData.isshowEnhancedDetails=!1}fetchLoanDetails(){this.theme1ApiService.fetchLoanDetails({access_token:this.journey.product.access_token,loanUuid:this.journey.product.loanUuid,microservicetoken:this.journey.product.oauthAccessToken}).then(a=>{"200"==a.code&&(this.metaConfig.customData.BranchDetails.name=`Bank Of India ${a.userHierarchyUnit.userHierarchyUnitName} Branch`,this.metaConfig.customData.BranchDetails.address=`${a.userHierarchyUnit.addressAssigned.line1Value} ${a.userHierarchyUnit.addressAssigned.cityValue},${a.userHierarchyUnit.addressAssigned.stateValue},${a.userHierarchyUnit.addressAssigned.zipCodeValue}`)},a=>{this.commonService.NavigateJourney("PRODUCT_ERROR"),this.commonVariableService.globalLoaderState=!1,this.showloader=!1})}enhanceSanctionSubmit(){this.metaConfig.customData.isSanctionEnhanced=!0,this.journey.metaData.capturedData.SANCTION_DETAILS=this.metaConfig.customData,this.commonService.setJourney(this.journey),this.formSubmitFlow()}static#t=this.\u0275fac=function(a){return new(a||o)(t.\u0275\u0275directiveInject(D.I),t.\u0275\u0275directiveInject(A.J),t.\u0275\u0275directiveInject(b.MatDialog),t.\u0275\u0275directiveInject(S.G),t.\u0275\u0275directiveInject(T.D),t.\u0275\u0275directiveInject(v.Router),t.\u0275\u0275directiveInject(I.d))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-sanction"]],decls:9,vars:6,consts:[[1,"col-xxl-12","col-xl-12","col-lg-12","col-xl-12","col-md-12","col-sm-12","col-12","commonStyle","main-cnt-pad","mobileWidt"],[1,""],["class","w-100  pl-0 pr-0",3,"ngClass",4,"ngIf"],["class","w-100",3,"ngClass",4,"ngIf"],[1,"w-100","containerscroll"],[3,"config"],[4,"ngIf"],["class","col-xxl-12 col-xl-12 col-lg-12 col-sm-12 col-md-12 col-12",4,"ngIf"],[1,"w-100","pl-0","pr-0",3,"ngClass"],[3,"stepperData"],[1,"w-100",3,"ngClass"],[1,"w-100","p-15","mob"],["class","display-flex mob-flex-col mb-50",4,"ngIf"],["class","display-flex justify-content-between p-20 mb-50 color-grey br-10 border border-radius-8 mob-flex-col",4,"ngIf"],[3,"config",4,"ngIf"],[1,"row"],[1,"col-xxl-6","col-xl-6","col-lg-6","col-sm-6","col-md-12","col-12"],[1,"col-xxl-12","col-lg-12","col-sm-12","col-md-12","col-12"],[1,"display-flex","mb-20","common-title","f-20"],["class"," bg-sidenav border-radius-8 bgblue p-5 display-flex flex-col",4,"ngIf"],[1,"col-xxl-12","col-lg-12","col-sm-12","col-md-12"],[1,"bg-sidenav","border-radius-8","bgblue","p-5"],[1,"display-flex","mb-20"],[1,"loan-calculator","w-100"],[3,"config","updateChart"],[1,"total-emi-details"],[1,"common-info","fw-bold"],[1,"amount"],["class","row fw-bold mob-p-15 pl-40",4,"ngIf"],["class","btn-pnl pr-5 ml-10 payment",4,"ngIf"],[1,"display-flex","mob-flex-col","mb-50"],["class","w-25 mobileWidt",4,"ngFor","ngForOf"],[1,"w-25","mobileWidt"],[1,"clr-lt-grey","mb-20","common-title","f-15"],[1,"f-24"],[1,"display-flex","justify-content-between","p-20","mb-50","color-grey","br-10","border","border-radius-8","mob-flex-col"],["class","text-nowrap pt-10","style","cursor:pointer ;",3,"click",4,"ngIf"],[1,"text-nowrap","pt-10",2,"cursor","pointer",3,"click"],["mat-flat-button","",1,"btn-orange","mobileButton","w-100"],[1,"bg-sidenav","border-radius-8","bgblue","p-5","display-flex","flex-col"],[3,"valueEmit","emiCalcData"],[1,"mb-5","p-20"],["mat-flat-button","",1,"btn-orange","mr-5","float-right",3,"click"],[1,"row","fw-bold","mob-p-15","pl-40"],[1,"m-0"],[1,"primary-clr"],[1,"btn-pnl","pr-5","ml-10","payment"],["mat-flat-button","",1,"btn-orange","mt-4","mob-w-100",3,"click","disabled"],[1,"col-xxl-12","col-xl-12","col-lg-12","col-sm-12","col-md-12","col-12"],[1,"col-xxl-12","col-xl-12","col-lg-12","col-sm-12","col-md-12","col-12","br-10","border","border-radius-8","mob-flex-col"],[1,"col-xxl-12","col-xl-12","col-lg-12","col-sm-12","col-md-12","col-12","mob-p-15","p-20","enhance-section-container"],[1,"display-flex","justify-content-between","br-10","mob-flex-col"],[1,"form-label-lg","f-20"],[1,"col-xxl-12","col-xl-12","col-lg-12","col-sm-12","col-md-12","col-12","row"],[1,"col-xxl-3","col-xl-3","col-lg-3","col-sm-3","col-md-12","col-12"],["for","loan",1,"label-disp","mb-2"],[1,"form-group","x-large"],["autocomplete","off","id","loan","name","loanAmount","type","number",1,"form-control",3,"ngModelChange","ngModel"],["for","tenure",1,"label-disp","mb-2"],[1,"form-group"],["autocomplete","off","id","tenure","name","loanAmount","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"w-50","mob-w-100"],[1,"title-area"],[1,"fw-500"],[1,"float-right","cursor-pointer",3,"click"],[1,"material-icons-outlined"],[1,"bank-detail-status","w-100"],[1,"mb-0","form-label-lg","d-flex","align-items-start","border","p-20","bgblue","border-radius-8"],["alt","",3,"src"],[1,"details-content"],[1,"address-content"],[1,"common-info"],[1,"col-xxl-12","col-xl-12","col-lg-12","col-sm-12","col-md-12","col-12","gap-1"],[1,"col-xl-4","col-lg-4","col-sm-5","col-md-6","col-12","ml-5","mob-ml-0","mob-mb-5","btn-orange",3,"click"],["class","col-xl-4 col-lg-4 col-sm-5 col-md-5 col-12 ml-5 mob-ml-0 mob-mb-5 secondary-btn",3,"click",4,"ngIf"],[1,"col-xl-4","col-lg-4","col-sm-5","col-md-5","col-12","ml-5","mob-ml-0","mob-mb-5","secondary-btn",3,"click"]],template:function(a,i){1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,g,2,4,"div",2)(3,h,2,4,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275element(5,"app-section-builder",5),t.\u0275\u0275template(6,U,37,10,"div",6)(7,$,45,10,"div",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,z,1,0,"spinner",6),t.\u0275\u0275elementEnd()),2&a&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.metaConfig.showStepper),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",i.metaConfig.showSubStepper),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",i.config),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",0==i.metaConfig.customData.isshowEnhancedDetails),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",1==i.metaConfig.customData.isshowEnhancedDetails),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",i.showloader))},dependencies:[n.NgClass,n.NgForOf,n.NgIf,C.DefaultValueAccessor,C.NumberValueAccessor,C.NgControlStatus,C.NgModel,M.MatButton,m.d,y.K,x.D,l.h,r.Q,E.t],styles:[".emi-calc-container[_ngcontent-%COMP%]   .label-disp[_ngcontent-%COMP%]{color:#565656;font-size:12px;font-family:var(--font-family-lt)}.emi-calc-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px!important}.emi-calc-container[_ngcontent-%COMP%]   .mat-slider-horizontal[_ngcontent-%COMP%]{height:40px;min-width:310px}.emi-calc-container[_ngcontent-%COMP%]   .mat-slider-horizontal[_ngcontent-%COMP%]     .mat-slider-track-background{background-color:var(--brand-color)!important}[_nghost-%COMP%]  .mat-slider-thumb{background-color:var(--brand-color)}[_nghost-%COMP%]  .mat-slider-track-fill{background-color:var(--brand-color)}[_nghost-%COMP%]  .mat-slider-thumb-label{background-color:var(--brand-color);border-radius:4px!important;width:65px;right:-30px!important}[_nghost-%COMP%]  .mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(.7)}[_nghost-%COMP%]  .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(0)!important}[_nghost-%COMP%]  .mat-slider-horizontal .mat-slider-thumb-label-text{transform:inherit!important}[_nghost-%COMP%]  .mat-slider{width:100%}[_nghost-%COMP%]  .mat-slider-track-background{background-color:#007dc566!important}.interestDiv[_ngcontent-%COMP%]{font-size:15px}.bgblue[_ngcontent-%COMP%]{background-color:#eff8fd}.pl_2[_ngcontent-%COMP%]{padding-left:2%!important}.payment[_ngcontent-%COMP%]{display:flex;gap:150px;align-items:baseline}.display[_ngcontent-%COMP%]{display:grid}.sanctionContent[_ngcontent-%COMP%]{border-radius:4px!important;border:1px solid grey}.label-disp[_ngcontent-%COMP%]{font-size:12px;font-family:var(--font-family-lt);color:#000}.total-emi-details[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20%}.sanction-generate-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}.title-area[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.enhance-section-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:20px}"]})}return o})()}];let J=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:o});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[v.RouterModule.forChild(H),v.RouterModule]})}return o})();var X=c(3654);let Y=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:o});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[n.CommonModule,C.FormsModule,J,X._]})}return o})()},8727:(O,_,c)=>{c.d(_,{h:()=>M});var n=c(5742),v=c(6581);let b=(()=>{class m{constructor(){this.totalEmi=new v.BehaviorSubject(0),this.principalAmount=new v.BehaviorSubject(0)}static#t=this.\u0275fac=function(r){return new(r||m)};static#e=this.\u0275prov=n.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();var t=c(8922),D=c(443),S=c(416),y=c(1095),E=c(820),f=c(7550),w=c(6190),P=c(1704);const A=m=>({tempDisData:m});function T(m,x){1&m&&n.\u0275\u0275element(0,"div")}function I(m,x){1&m&&n.\u0275\u0275element(0,"div")}function C(m,x){if(1&m){const l=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(5,"div",16),n.\u0275\u0275elementStart(6,"div",17)(7,"div",18)(8,"input",19),n.\u0275\u0275listener("change",function(){const s=n.\u0275\u0275restoreView(l).tempDisData,d=n.\u0275\u0275nextContext();return d.validateValue(s),n.\u0275\u0275resetView(d.calculate())})("input",function(s){const d=n.\u0275\u0275restoreView(l).tempDisData,g=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(g.validate(s,d))}),n.\u0275\u0275twoWayListener("ngModelChange",function(s){const d=n.\u0275\u0275restoreView(l).tempDisData;return n.\u0275\u0275twoWayBindingSet(d.binder,s)||(d.binder=s),n.\u0275\u0275resetView(s)}),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementStart(9,"div",20)(10,"mat-slider",21),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(l);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.calculate())}),n.\u0275\u0275elementStart(11,"input",22),n.\u0275\u0275twoWayListener("ngModelChange",function(s){const d=n.\u0275\u0275restoreView(l).tempDisData;return n.\u0275\u0275twoWayBindingSet(d.binder,s)||(d.binder=s),n.\u0275\u0275resetView(s)}),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(12,"div",23)(13,"label",15),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"label",15),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd()()}if(2&m){const l=x.tempDisData;n.\u0275\u0275advance(3),n.\u0275\u0275attribute("for","loanAmount"),n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate1(" ",l.dispName," "),n.\u0275\u0275advance(4),n.\u0275\u0275twoWayProperty("ngModel",l.binder),n.\u0275\u0275property("OnlyNumber",!0)("max",l.max)("min",l.min),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayWith",l.func)("max",l.max)("min",l.min)("discrete",!0)("step",l.steps)("vertical",!1),n.\u0275\u0275advance(),n.\u0275\u0275twoWayProperty("ngModel",l.binder),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(l.footerStartVal),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(l.footerEndVal)}}let M=(()=>{class m{constructor(l,r,s,d,g){this.service=l,this.theme1ApiService=r,this.commonVariableService=s,this.route=d,this.commonService=g,this.valueEmit=new n.EventEmitter,this.loanAmount=1e3,this.tenure=1,this.emi=0,this.loanAmtDisp={dispName:"Loan Amount",min:null,max:null,steps:1e3,binder:null,footerStartVal:null,footerEndVal:null,func:this.formatAmount},this.tenureDisp={dispName:"Tenure",min:null,max:null,steps:1,binder:null,footerStartVal:null,footerEndVal:null,func:this.formatTenure}}ngOnInit(){this.journey=this.commonService.getJourney(),this.loanAmtDisp.min=this.emiCalcData?.minLoanAmount,this.loanAmtDisp.max=this.emiCalcData?.maxLoanAmount,this.loanAmtDisp.binder=this.emiCalcData?.maxLoanAmount,this.loanAmtDisp.footerStartVal=this.formatAmount(this.emiCalcData?.minLoanAmount),this.loanAmtDisp.footerEndVal=this.formatAmount(this.emiCalcData?.maxLoanAmount),this.tenureDisp.min=this.emiCalcData?.minTenure,this.tenureDisp.max=this.emiCalcData?.maxTenure,this.tenureDisp.binder=this.emiCalcData?.maxTenure,this.tenureDisp.footerStartVal=this.formatTenure(this.emiCalcData?.minTenure),this.tenureDisp.footerEndVal=this.formatTenure(this.emiCalcData?.maxTenure),this.interest=this.emiCalcData?.interest,this.emi=this.emiCalcData?.emiToBePaid,this.calculate(!0)}ngOnChanges(){this.loanAmtDisp.binder=this.isCheckboxTrue?this.setMaxAmount:this.emiCalcData?.minLoanAmount}formatAmount(l){return"\u20b9 "+new Intl.NumberFormat("en-IN").format(l)}formatTenure(l){return l+" months"}calculate(l){if(this.emiCalcData.rule){this.emi=this.formatAmount(this.commonService.applyJsonLogic(this.emiCalcData.rule,{loanAmount:this.loanAmtDisp.binder,tenure:this.tenureDisp.binder,interest:this.interest}));const r={totalEmi:this.emi,principalAmount:this.loanAmtDisp.binder};this.service.totalEmi.next(r.totalEmi),this.service.principalAmount.next(r.principalAmount)}else if(this.emiCalcData.dontCalculate)this.emiCalcData.loanAmount=this.loanAmtDisp.binder,this.emiCalcData.tenure=this.tenureDisp.binder,l||this.valueEmit.emit(this.emiCalcData);else{this.emi=Math.round(this.loanAmtDisp.binder/this.tenureDisp.binder+this.loanAmtDisp.binder*(.01*this.interest)/this.tenureDisp.binder),this.emiCalcData.emiToBePaid=this.emi;const r={totalEmi:this.emi,principalAmount:this.loanAmtDisp.binder};this.emiCalcData.emiToBePaid=this.emi,this.service.totalEmi.next(r.totalEmi),this.service.principalAmount.next(r.principalAmount)}}calculateEmi(){this.commonVariableService.sanctionProceedBtnEnable=!0,this.calculate()}validateValue(l){l.binder=Number(l.binder),isNaN(l.binder)&&(l.binder=l.min)}validate(l,r){Number(l.target.value)>r.max&&(l.target.value=r.max,this.emiCalcData.loanAmount=this.emiCalcData.maxLoanAmount,this.emiCalcData.tenure=this.emiCalcData.maxTenure,this.valueEmit.emit(this.emiCalcData))}static#t=this.\u0275fac=function(r){return new(r||m)(n.\u0275\u0275directiveInject(b),n.\u0275\u0275directiveInject(t.G),n.\u0275\u0275directiveInject(D.J),n.\u0275\u0275directiveInject(S.ActivatedRoute),n.\u0275\u0275directiveInject(y.I))};static#e=this.\u0275cmp=n.\u0275\u0275defineComponent({type:m,selectors:[["app-emi-calculator"]],inputs:{emiCalcData:"emiCalcData",setMaxAmount:"setMaxAmount",isCheckboxTrue:"isCheckboxTrue"},outputs:{valueEmit:"valueEmit"},features:[n.\u0275\u0275NgOnChangesFeature],decls:18,vars:14,consts:[["sliderTemplate",""],[1,"container","emi-calc-container",2,"overflow-x","auto"],[1,"row"],[1,"col","col-sm-12","col-md-12","col-lg-12"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"row","mt-3","mb-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","d-flex","mob-d-block","j-c-sb"],[1,"col-xxl-4","col-xl-4","col-lg-5","col-md-5","col-sm-5","col-12","mob-mb-10"],[1,"label-disp","mb-2"],["disabled","","type","text",1,"form-control",3,"change","ngModelChange","id","ngModel"],[1,"col-xxl-4","col-xl-4","col-lg-5","col-md-5","col-sm-5","col-12"],["autocomplete","off","disabled","","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"py-3"],[1,"row","dispWidth"],[1,"col","col-sm-6","col-md-3"],[1,"label-disp"],[1,"col","col-sm-3","col-md-3","mob-d","mobileNone"],[1,"col","col-sm-3","col-md-6"],[1,"form-group","dispWidth"],["autocomplete","off","id","loanAmount","name","loanAmount","type","number",1,"form-control",3,"change","input","ngModelChange","ngModel","OnlyNumber","max","min"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mt-3"],["color","primary","thumbLabel","",3,"change","displayWith","max","min","discrete","step","vertical"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","d-flex","justify-content-between","align-items-center"]],template:function(r,s){if(1&r){const d=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3),n.\u0275\u0275template(3,T,1,0,"div",4)(4,I,1,0,"div",4),n.\u0275\u0275elementStart(5,"section")(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),n.\u0275\u0275text(10,"Interest per annum (%)"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"input",9),n.\u0275\u0275listener("change",function(){return n.\u0275\u0275restoreView(d),n.\u0275\u0275resetView(s.calculate())}),n.\u0275\u0275twoWayListener("ngModelChange",function(h){return n.\u0275\u0275restoreView(d),n.\u0275\u0275twoWayBindingSet(s.emiCalcData.interest,h)||(s.emiCalcData.interest=h),n.\u0275\u0275resetView(h)}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(12,"div",10)(13,"label",8),n.\u0275\u0275text(14,"EMI to be paid"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"input",11),n.\u0275\u0275twoWayListener("ngModelChange",function(h){return n.\u0275\u0275restoreView(d),n.\u0275\u0275twoWayBindingSet(s.emiCalcData.emiToBePaid,h)||(s.emiCalcData.emiToBePaid=h),n.\u0275\u0275resetView(h)}),n.\u0275\u0275elementEnd()()()()()()()(),n.\u0275\u0275template(16,C,17,15,"ng-template",null,0,n.\u0275\u0275templateRefExtractor)}if(2&r){const d=n.\u0275\u0275reference(17);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngTemplateOutlet",d)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(10,A,s.loanAmtDisp)),n.\u0275\u0275advance(),n.\u0275\u0275property("ngTemplateOutlet",d)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(12,A,s.tenureDisp)),n.\u0275\u0275advance(5),n.\u0275\u0275attribute("for","intrest"),n.\u0275\u0275advance(2),n.\u0275\u0275property("id","intrest"),n.\u0275\u0275twoWayProperty("ngModel",s.emiCalcData.interest),n.\u0275\u0275advance(2),n.\u0275\u0275attribute("for","Emi_to_be_paid"),n.\u0275\u0275advance(2),n.\u0275\u0275twoWayProperty("ngModel",s.emiCalcData.emiToBePaid),n.\u0275\u0275attribute("id","Emi_to_be_paid")}},dependencies:[E.NgTemplateOutlet,f.DefaultValueAccessor,f.NumberValueAccessor,f.NgControlStatus,f.MinValidator,f.MaxValidator,f.NgModel,w.MatSlider,w.MatSliderThumb,P.g],styles:[".emi-calc-container[_ngcontent-%COMP%]{padding:40px}.emi-calc-container[_ngcontent-%COMP%]   .dispWidth[_ngcontent-%COMP%]{height:18px;box-sizing:border-box}.emi-calc-container[_ngcontent-%COMP%]   .label-disp[_ngcontent-%COMP%]{color:#565656;font-size:12px;font-family:var(--font-family-lt)}.emi-calc-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px!important}.emi-calc-container[_ngcontent-%COMP%]   .mat-slider-horizontal[_ngcontent-%COMP%]{height:40px;min-width:310px}.emi-calc-container[_ngcontent-%COMP%]   .mat-slider-horizontal[_ngcontent-%COMP%]     .mat-slider-track-background{background-color:var(--brand-color)!important}[_nghost-%COMP%]  .mat-slider-thumb{background-color:var(--brand-color)}[_nghost-%COMP%]  .mat-slider-track-fill{background-color:var(--brand-color)}[_nghost-%COMP%]  .mat-slider-thumb-label{background-color:var(--brand-color);border-radius:4px!important;width:65px;right:-30px!important}[_nghost-%COMP%]  .mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(.7)}[_nghost-%COMP%]  .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(0)!important}[_nghost-%COMP%]  .mat-slider-horizontal .mat-slider-thumb-label-text{transform:inherit!important}[_nghost-%COMP%]  .mat-slider{width:100%}[_nghost-%COMP%]  .mat-slider-track-background{background-color:#007dc566!important}"]})}return m})()}}]);